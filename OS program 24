// unix_file_calls.c
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h>

int main(){
    int fd = open("sample.txt", O_CREAT | O_WRONLY | O_TRUNC, 0644);
    if(fd < 0){ perror("open"); return 1; }
    char *text = "Hello from system calls\n";
    write(fd, text, strlen(text));
    close(fd);

    fd = open("sample.txt", O_RDONLY);
    if(fd < 0){ perror("open"); return 1; }
    char buf[100]; int n = read(fd, buf, sizeof(buf)-1);
    if(n>0){ buf[n]=0; printf("Read: %s", buf); }
    close(fd);

    // remove file
    if(unlink("sample.txt") == 0) printf("sample.txt removed\n");
    return 0;
}
